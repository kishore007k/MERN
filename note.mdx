# Notes:-

## Connecting to the server:

```js
mongoose
	.connect(MONGODB, { useNewUrlParser: true })
	.then(() => {
		console.log("MongoDB Connected");
		return server.listen({ port: 5000 });
	})
	.then((res) => {
		console.log(`Server running at ${res.url}`);
	});
```

---

## Defining the server:

```js
const server = new ApolloServer({
	typeDefs,
	resolvers,
});
```

---

## Defining Types of Query:

```js
const typeDefs = gql`
	type Post {
		id: ID!
		body: String!
		createdAt: String!
		username: String!
	}
	type Query {
		getAllPosts: [Post]
	}
`;
```

---

## Fetch Data from Database:

The following code is responsible for fetching the data from the database according to the query.

```js
const resolvers = {
	Query: {
		async getAllPosts() {
			try {
				const posts = await Post.find();
				return posts;
			} catch (err) {
				throw new Error(err);
			}
		},
	},
};
```

---

### For Database:

1. Create a project in the MongoDB Atlas Database.
2. Go to the `Database Access` and add a user and give the required permissions.
3. If the password is auto generated save it.
4. Go to the `Network Access` and add the IP Address of the server that is going to use this database to fetch the data.
5. For dev purpose I gave it for all.
6. Create a `cluster`.

### Configurations:

1. In the `cluster` click on the `CONNECT` -> `Connect Your Application` -> **Copy** the `Connection String Only`
2. Create a new file `config.js` or `.env` for the security purpose and add the string copied from the mongoDB site as the follow

```js
module.exports = {
	MONGODB:
		"mongodb+srv://kishore:<password>@mern-stack.zsulf.mongodb.net/<databaseName>?retryWrites=true&w=majority",
};
```

3. In the above String Instead of <password> & <databaseName> give the Password you created/autoGenerated & the database name
4. Improt the `config.js` inside the `index.js`

### Creating a collection in the database:

1. In the mongoDB database click on the `COLLECTION` -> `Add my own data` -> `Database Name` & `collection` -> `INSERT DOCUMENT` -> **give some dummy data**

### To Run:

1. node index

#### Notes yet to be taken.

Here is the link to the Youtube vdo. `https://www.youtube.com/watch?v=n1mdAPFq2Os&t=2393s&ab_channel=freeCodeCamp.org`
